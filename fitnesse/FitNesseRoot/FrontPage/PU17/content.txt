---
Test
---
!define TEST_SYSTEM {slim}
!define COMMAND_PATTERN {%m /opt/fitsharp/lib/net10.0/Runner.dll -c /opt/fitnesse/FitNesseRoot/suiteconfig.xml %p}
!define TEST_RUNNER {dotnet}

!1 PU17. Aktualizacja stanu maczkopatu

!2 Cel
Aktualizacja informacji zawierającej stan zapełnienia maczkopatu.

!2 Warunki wstępne
 * Inicjacja przez PU15: Przyjmowanie paczek
 * Inicjacja przez PU16: Wydawanie paczek
 * Zmniejszenie stanu zapełnienia możliwe tylko dla niepustego maczkopatu
 * Zwiększenie stanu zapełnienia możliwe tylko dla niepełnego maczkopatu

!2 Warunki końcowe
 * Zmieniono stan zapełnienia maczkopatu
 * Zmiana statusu paczki
 * Spełniono wymaganie F10: Maczkopat aktualizuje swój stan zapełnienia
 * Spełniono wymaganie F15: Kierownik może sprawdzać stan maczkopatów
 * Spełniono wymaganie F9: System powiadamia policję o kalendarzu adwentowym

----

!3 Przygotowanie danych testowych

!|MaczkopatStateSetup|
|MaczkopatCode|Capacity|InitialParcelCount|Created?|
|MCZK-STATE-001|10|5|true|
|MCZK-STATE-002|5|5|true|
|MCZK-STATE-003|10|0|true|
|MCZK-STATE-004|10|3|true|

----

!3 Scenariusz 1.2: Przyjęcie paczki - zwiększenie stanu maczkopatu

!|MaczkopatStateUpdate|
|MaczkopatCode|Operation|ParcelFriendlyId|OperationSuccess?|LockerOpened?|CurrentParcelCount?|MaxCapacity?|ErrorMessage?|
|MCZK-STATE-001|Przyjęcie|PKG-NEW-001|true|true|6|10||

!3 Scenariusz 1.3: Wydanie paczki - zmniejszenie stanu maczkopatu

!|MaczkopatStateUpdate|
|MaczkopatCode|Operation|ParcelFriendlyId|OperationSuccess?|LockerOpened?|CurrentParcelCount?|ErrorMessage?|
|MCZK-STATE-004|Wydanie|PKG-STATE-004|true|true|2||

----

!3 Scenariusz 2.1: Maczkopat jest pełny - próba dodania paczki zablokowana

!|MaczkopatStateUpdate|
|MaczkopatCode|Operation|ParcelFriendlyId|OperationSuccess?|LockerOpened?|ErrorMessage?|
|MCZK-STATE-002|Przyjęcie|PKG-NEW-002|false|false|Maczkopat jest pełny|

!3 Scenariusz 2.1: Maczkopat jest pusty - próba wyjęcia paczki zablokowana

!|MaczkopatStateUpdate|
|MaczkopatCode|Operation|ParcelFriendlyId|OperationSuccess?|LockerOpened?|ErrorMessage?|
|MCZK-STATE-003|Wydanie|PKG-EMPTY|false|false|Maczkopat jest pusty|

----

!3 Scenariusz 2.2: Siłowe wyjęcie paczki - zgłoszenie do KMZB (F9)

!|KmzbReport|
|MaczkopatCode|EventType|ReportCreated?|NotificationSent?|
|MCZK-STATE-001|SiłoweWyjęcie|true|true|
|MCZK-STATE-001|Włamanie|true|true|
|MCZK-STATE-001|NormalneWydanie|false|false|

----

!3 Scenariusz: Weryfikacja stanu maczkopatu (F15)

!|MaczkopatStateCheck|
|MaczkopatCode|CurrentParcelCount?|MaxCapacity?|IsFull?|IsEmpty?|
|MCZK-STATE-002|5|5|true|false|
|MCZK-STATE-003|0|10|false|true|
|MCZK-STATE-001|6|10|false|false|

----

!3 Czyszczenie danych testowych

!|MaczkopatStateTeardown|
|Cleaned?|
|true|
